# Configuración de Nginx para botusbcali
# Este archivo debe copiarse a: /home/fac.ingenieria/lidis-growth-lab/nginx-projects/botusbcali.conf
# Comando: sudo cp nginx-botusbcali.conf /home/fac.ingenieria/lidis-growth-lab/nginx-projects/botusbcali.conf
# Después: sudo docker exec lidis-growth-lab_web_1 nginx -s reload

# Proyecto: botusbcali
location ^~ /botusbcali/ {
    client_max_body_size 120M;

    proxy_pass http://172.18.0.1:9011/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Prefix /botusbcali;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";

    # No reescribir contenido - Express ya sirve las rutas correctamente
    # sub_filter deshabilitado porque React Router maneja las rutas con basename="/botusbcali/"
}

location = /botusbcali {
    return 308 /botusbcali/;
}
